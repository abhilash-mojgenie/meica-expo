---
import Avatar from "../small-components/Avatar.astro";
import AvatarMobile from "../small-components/AvatarMobile.astro";
import KeynoteCard from "../small-components/KeynoteCard.astro";
import SubHeading from "../small-components/SubHeading.astro";
---

<div class="mt-[40px] md:mt-[50px] 2xl:mt-[100px]">
  <SubHeading title="keynote speakers" />

  <div
    class="flex md:flex-row px-[20px] md:px-0 flex-col my-[40px] md:my-[30px] justify-center items-center lg:items-start gap-10 lg:justify-between lg:gap-[60px] 2xl:gap-[112px] lg:mt-[55px] lg:mb-[100px]"
  >
    <KeynoteCard
      src="/assets/img/png/avatar-1.png"
      name="Mohammed H. AlAbbadi"
      pos="Senior Vice President - Engineering Services Saudi Aramco"
      id="0_3_2"
    />
    <KeynoteCard
      src="/assets/img/png/avatar-2.png"
      name="Mohammed H. "
      pos="Senior Vice President - Engineering Services Saudi Aramco"
      id="0_3_1"
    />
  </div>
  <div class="bg-[#E0F6FF] w-full relative 2xl:h-[789px]">
    <img
      src="/assets/img/svg/pattern-speakers.svg"
      alt=""
      class="absolute top-0 right-0"
    />
    <div
      class="lg:pt-[100px] pt-[40px] gap-[25px] hidden w-full md:pt-[50px] xl:pt-[128px] md:px-1 2xl:pl-[81px] 2xl:pr-[161px] md:grid md:grid-cols-2 xl:grid-cols-4 z-10 md:gap-[30px] px-[23px]"
    >
      <Avatar
        src="/assets/img/speakers/speaker-1.avif"
        name="James Rock"
        pos="Founder & CEO"
        com="Saudi Aramco"
      />
      <Avatar
        src="/assets/img/speakers/speaker-2.avif"
        name="James Rock"
        pos="Founder & CEO"
        com="Saudi Aramco"
      />
      <Avatar
        src="/assets/img/speakers/speaker-3.avif"
        name="James Rock"
        pos="Founder & CEO"
        com="Saudi Aramco"
      />
      <Avatar
        src="/assets/img/speakers/speaker-4.avif"
        name="James Rock"
        pos="Founder & CEO"
        com="Saudi Aramco"
      />
    </div>

    <!-- mobile -->
    <div
      class="relative w-full h-[300px] pt-[40px] px-[23px] md:hidden"
      data-carousel="static"
    >
      <!-- Carousel wrapper -->
      <div class="relative h-[300px] overflow-hidden" id="carouselWrapper">
        <!-- Item 1 -->
        <div
          class="hidden duration-700 ease-in-out"
          data-carousel-item="active"
        >
          <div class="flex gap-[25px] w-full bg-white">
            <AvatarMobile
              src="/assets/img/speakers/speaker-1.avif"
              name="James Rock"
              pos="Founder & CEO"
              com="Saudi Aramco"
            />
            <AvatarMobile
              src="/assets/img/speakers/speaker-2.avif"
              name="James Rock"
              pos="Founder & CEO"
              com="Saudi Aramco"
            />
          </div>
        </div>
        <!-- Item 2 -->
        <div class="hidden duration-700 ease-in-out" data-carousel-item>
          <div class="flex gap-[25px] w-full bg-white">
            <AvatarMobile
              src="/assets/img/speakers/speaker-3.avif"
              name="James Rock"
              pos="Founder & CEO"
              com="Saudi Aramco"
            />
            <AvatarMobile
              src="/assets/img/speakers/speaker-4.avif"
              name="James Rock"
              pos="Founder & CEO"
              com="Saudi Aramco"
            />
          </div>
        </div>
        <!-- Item 3 -->
        <div class="hidden duration-700 ease-in-out" data-carousel-item>
          <div class="flex gap-[25px] w-full">
            <AvatarMobile
              src="/assets/img/speakers/speaker-2.avif"
              name="James Rock"
              pos="Founder & CEO"
              com="Saudi Aramco"
            />
            <AvatarMobile
              src="/assets/img/speakers/speaker-4.avif"
              name="James Rock"
              pos="Founder & CEO"
              com="Saudi Aramco"
            />
          </div>
        </div>
      </div>
      <!-- Slider indicators -->
      <div
        class="absolute z-30 flex -translate-x-1/2 space-x-3 rtl:space-x-reverse bottom-[-57px] left-1/2"
        id="carouselIndicators"
      >
        <button
          type="button"
          class="w-2 h-2 rounded-full bg-[#4081B3]"
          aria-current="true"
          aria-label="Slide 1"
          data-carousel-slide-to="0"></button>
        <button
          type="button"
          class="w-2 h-2 rounded-full bg-white/50"
          aria-current="false"
          aria-label="Slide 2"
          data-carousel-slide-to="1"></button>
        <button
          type="button"
          class="w-2 h-2 rounded-full bg-white/50"
          aria-current="false"
          aria-label="Slide 3"
          data-carousel-slide-to="2"></button>
      </div>
    </div>

    <!-- end -->

    <div
      class="pt-[100px] pb-[39px] md:py-[100px] px-[43px] flex justify-center"
    >
      <button
        class="linear-gradient-button font-semibold text-[22px] parallelogram"
      >
        <span
          class="px-[65px] md:px-[115px] py-[9px] md:py-[12px] text-center uppercase skew-fix text-[16px] md:text-[22px] text-white"
          >View All Speakers</span
        >
      </button>
    </div>
  </div>
</div>

<script is:inline>
  document.addEventListener("DOMContentLoaded", function () {
    const carouselWrapper = document.getElementById("carouselWrapper");
    const carouselIndicators = document.getElementById("carouselIndicators");

    // Function to handle slide change
    function goToSlide(index) {
      // Hide all slides
      const slides = carouselWrapper.querySelectorAll("[data-carousel-item]");
      slides.forEach((slide) => slide.classList.add("hidden"));

      // Show the selected slide
      slides[index].classList.remove("hidden");

      // Update active indicator button
      const indicators = carouselIndicators.querySelectorAll("button");
      indicators.forEach((indicator, i) => {
        if (i === index) {
          indicator.classList.add("bg-[#4081B3]");
          indicator.classList.remove("bg-white/50");
          indicator.setAttribute("aria-current", "true");
        } else {
          indicator.classList.remove("bg-[#4081B3]");
          indicator.classList.add("bg-white/50");
          indicator.setAttribute("aria-current", "false");
        }
      });
    }

    // Add event listeners to indicators
    const indicators = carouselIndicators.querySelectorAll("button");
    indicators.forEach((indicator, index) => {
      indicator.addEventListener("click", function () {
        goToSlide(index);
      });
    });
  });
</script>
